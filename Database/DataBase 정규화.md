# DataBase 정규화

+ ## DataBase 정규화
  + 이상 문제를 해결하기 위해 속성들 끼리의 종속 관계를 분석하여 여러개의 릴레이션으로 분해하는 과정.    
  
    일반적으로 테이블을 여러개로 분해하면 속도는 상대적으로 느려질 수 있지만, 분해하지 않으면 삽입/갱신/삭제 시   
    
    발생할 수 있는 이상 현상들이 발생하는데 정규화를 통해   
    
    불필요한 데이터(redundancy)를 없앨 수 있고,  각종 이상현상(Anamolies)들을 방지할 수 있다.
    
    정규형에는 제1정규형, 제2정규형, 제3정규형, BCNF형, 제4정규형, 제5정규형이 있다.
  
  
  + 데이터베이스 정규화의 목적은 주로 두 가지

    1. 불필요한 데이터(data redundancy)를 제거한다.

    2. 데이터 저장을 "논리적으로" 한다.

  + #### 이상 문제

    + 삽입 이상 : 데이터를 저장할 때 원하지 않는 정보가 함께 삽입되는 경우
    + 삭제 이상 : 튜플을 삭제함으로써 유지되어야 하는 정보 까지도 연쇄적으로 삭제되는 경우
    + 갱신 이상 : 중복된 튜플 중 일부의 속성만 갱신 시킴 으로써 정보의 모순성이 발생하는 경우

<br>

+ ### 1차 정규화

  1차 정규형은 각 로우마다 컬럼의 값이 1개씩만 있어야 한다. 이를 컬럼이 원자값(Atomic Value)를 갖는다고 한다. (도메인 원자값)    
  예를 들어, 아래와 같은 경우 Adam의 Subject가 Biology와 Maths 두 개 이기 때문에 1차 정규형을 만족하지 못한다.
  
  <br>
  
  **< 1차 정규화를 하기 전 >**
  
  ![image](https://user-images.githubusercontent.com/73928346/126906308-e16aae69-6414-4990-bb7e-10c6034af063.png)
  
  <br>
  
  **< 1차 정규화를 한 후 >**

  ![image](https://user-images.githubusercontent.com/73928346/126906666-674d4420-57aa-44c4-874b-766e703bf1c3.png)

<br>

+ ### 2차 정규화

  2차 정규화은 **부분적 함수 종속을 제거**한다.   
  즉 기본키 중에 특정 컬럼에만 종속된 컬럼(부분적 종속)이 없어야 한다는 것   
  
  <br>
  
  **< 2차 정규화를 하기 전 >**
  
  ![image](https://user-images.githubusercontent.com/73928346/126906644-ea9d4705-9ab6-4379-a5e5-1a06163c0419.png)
  
  <br>
  
  함수(학번, 과목코드)에서 부분 함수인 학번 혼자서 학부와 등록금을 결정할 수 있다.   
  따라서 제2 정규형을 만족할 수 없기 때문에 성적, 학부, 등록금에 모두 영향을 주는 학번을 기준으로 릴레이션을 아래와 같이 분리시킨다.
  
  <br>
  
  **< 2차 정규화를 한 후 >**
  
  ![image](https://user-images.githubusercontent.com/73928346/126906648-8c0c1f0c-2f0d-4ed0-beef-1a71fd1d31eb.png)

<br>

+ ### 3차 정규화
  3차 정규화은 **이행적 함수 종속을 제거**한다.   
  
  현재 아래 테이블은 학번(X)이 학부(Y)를 결정하고, 학부(Y)가 등록금(Z)을 결정 하고,    
  이행 규칙에 따라 학번(X)이 등록금(Z)을 결정할 수 있습니다. (이행 규칙 : X → Y 이고 Y → Z 이면 X → Z 이다.)   

  현재는 이행 규칙을 만족하므로 제3 정규형을 만족시키지 못하며, 이행 함수 종속을 제거해주어야 한다.

  <br>
  
  **< 3차 정규화를 하기 전 >**
  
  ![image](https://user-images.githubusercontent.com/73928346/126906968-5f04fad0-fecc-43c4-8d8e-eee103c7d151.png)
  
  <br>
  
  위의 상태에서 갱신 이상이나 여러 문제가 발생할 수 있기 때문에   
  X → Y, Y → Z 의 형태로 릴레이션을 또 다시 분해한다.   
  
  <br>
  
  **< 3차 정규화를 한 후 >**   
  
  ![image](https://user-images.githubusercontent.com/73928346/126907001-cbee53f1-63a1-43fd-b8c5-997bf0836654.png)

<br>

+ ### BCNF : 결정자 중 후보키가 아닌 것들은 제거
+ ### 제4 정규형 : 다치 종속 제거
+ ### 제5 정규형 : 조인 종속성 제거


<br>
<br>


#### reference
+ https://3months.tistory.com/193
+ https://nirsa.tistory.com/107